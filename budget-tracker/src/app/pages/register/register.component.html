<div class="page-body" id="register-page">
  <div class="page-card">
    <mat-card>
      <mat-card-title>REGISTER NEW USER</mat-card-title>
      <mat-card-content>
        <form [formGroup]="registerForm" novalidate>
          <div class="form-control">
            <mat-form-field class="example-full-width" color="accent">
              <input matInput placeholder="Username" formControlName="username">
              <mat-error *ngIf="username.hasError('required')">
                Username is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-control">
            <mat-form-field class="example-full-width" color="accent">
              <input matInput placeholder="Password" formControlName="password" type="password">
              <mat-error *ngIf="password.hasError('required')">
                Password is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-control">
            <mat-form-field class="example-full-width" color="accent">
              <input matInput placeholder="Email" formControlName="email" type="email">
              <mat-error *ngIf="email.hasError('required')">
                Email is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="email.hasError('email')">
                Not a valid <strong>email</strong>
              </mat-error>
            </mat-form-field>
          </div>

          <button mat-raised-button class="mat-accent" (click)="submit()" [disabled]="!registerForm.valid">Register</button>
          </form>
      </mat-card-content>
    </mat-card>
  </div>
<div class="page-card">
  <mat-card>
  <mat-card-title>All USERS</mat-card-title>
  <mat-card-content>
<mat-accordion>
  <mat-expansion-panel *ngFor="let user of users"
                       (opened)="panelOpenState = true"
                       (closed)="panelOpenState = false">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{user.username}}
      </mat-panel-title>
      <mat-panel-description>
        {{panelOpenState ? 'ClOSE DETAILS' : 'SHOW DETAILS'}}
      </mat-panel-description>
    </mat-expansion-panel-header>


        <form [formGroup]="changeForm" novalidate>

          <div class="form-control">
            <mat-form-field color="accent">
              <input matInput placeholder="Username" formControlName="change_username" value="{{user.username}}" >
              <mat-error *ngIf="change_username.hasError('required')">
                Username is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-control">
            <mat-form-field color="accent">
              <input matInput placeholder="Password" type="password" formControlName="change_password" value="{{user.password}}">
              <mat-error *ngIf="change_password.hasError('required')">
                Password is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="form-control">
            <mat-form-field class="example-full-width" color="accent">
              <input matInput placeholder="Email" formControlName="change_email" type="email" value="{{user.email}}">
              <mat-error *ngIf="change_email.hasError('required')">
                Email is <strong>required</strong>
              </mat-error>
              <mat-error *ngIf="change_email.hasError('email')">
                Not a valid <strong>email</strong>
              </mat-error>
            </mat-form-field>
          </div>
          <button mat-raised-button (click)= "update(user)" color="accent">Change</button>
          <button mat-raised-button (click)="delete(user.id)" color="primary">Delete</button>

        </form>

  </mat-expansion-panel>
</mat-accordion>
  </mat-card-content>
</mat-card>
</div>
</div>
